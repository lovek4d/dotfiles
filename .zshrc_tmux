t() {
  if [[ $# -gt 0 ]]; then
    tmux "$@"
    return
  fi
  cat <<'EOF'
tmux aliases:
  sessions
    tl  list-sessions
    td  detach
    tn  new session <name>
    ts  switch session (fzf)
    tk  kill session (fzf)

  keybindings (ctrl+b â€¦)
    d      detach
    c      new window
    n / p  next / prev window
    ,      rename window
    w      window list
    %      split vertical
    "      split horizontal
    arrow  switch pane
    z      zoom pane
    [      scroll / copy mode
    x      kill pane
EOF
}

# simple aliases
alias tl='tmux list-sessions'
alias td='tmux detach'

## create named session (avoids nesting)
tn() {
  if [[ -z "$1" ]]; then
    echo "usage: tn <name>" && return 1
  fi
  if [[ -n "$TMUX" ]]; then
    tmux new-session -ds "$1" && tmux switch-client -t "$1"
  else
    tmux new-session -s "$1"
  fi
}

## switch session (inline or fzf select)
ts() {
  if [[ -n "$1" ]]; then
    if [[ -n "$TMUX" ]]; then
      tmux switch-client -t "$1"
    else
      tmux attach -t "$1"
    fi
  else
    local session
    session=$(tmux list-sessions -F '#{session_name}' 2>/dev/null \
      | fzf --prompt='switch session> ' --height=40% --reverse)
    [[ -z "$session" ]] && return 1
    if [[ -n "$TMUX" ]]; then
      tmux switch-client -t "$session"
    else
      tmux attach -t "$session"
    fi
  fi
}

## kill session (inline or fzf select)
tk() {
  if [[ -n "$1" ]]; then
    tmux kill-session -t "$1"
  else
    local session
    session=$(tmux list-sessions -F '#{session_name}' 2>/dev/null \
      | fzf --prompt='kill session> ' --height=40% --reverse)
    [[ -z "$session" ]] && return 1
    tmux kill-session -t "$session"
  fi
}
