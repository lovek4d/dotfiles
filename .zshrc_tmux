t() {
  if [[ $# -gt 0 ]]; then
    tmux "$@"
    return
  fi
  cat <<'EOF'
tmux aliases:
  sessions
    td  detach
    tk  kill session (fzf)
    tl  list-sessions
    tn  new session <name>
    ts  switch session (fzf)

  panes
    trpd  resize pane down  5
    trpl  resize pane left  5
    trpr  resize pane right 5
    trpu  resize pane up    5

  keybindings (ctrl+b â€¦)
    "      split horizontal
    %      split vertical
    ,      rename window
    [      scroll / copy mode
    arrow  switch pane
    c      new window
    d      detach
    n / p  next / prev window
    space  command palette
    w      window list
    x      kill pane
    z      zoom pane

  settings
    set -g mouse on
EOF
}

# simple aliases
alias tl='tmux list-sessions'
alias td='tmux detach'
alias trpu='tmux resize-pane -U 5'
alias trpd='tmux resize-pane -D 5'
alias trpl='tmux resize-pane -L 5'
alias trpr='tmux resize-pane -R 5'

## create named session (avoids nesting)
tn() {
  if [[ -z "$1" ]]; then
    echo "usage: tn <name>" && return 1
  fi
  if [[ -n "$TMUX" ]]; then
    tmux new-session -ds "$1" && tmux switch-client -t "$1"
  else
    tmux new-session -s "$1"
  fi
}

## switch session (inline or fzf select)
ts() {
  if [[ -n "$1" ]]; then
    if [[ -n "$TMUX" ]]; then
      tmux switch-client -t "$1"
    else
      tmux attach -t "$1"
    fi
  else
    local session
    session=$(tmux list-sessions -F '#{session_name}' 2>/dev/null \
      | fzf --prompt='switch session> ' --height=40% --reverse)
    [[ -z "$session" ]] && return 1
    if [[ -n "$TMUX" ]]; then
      tmux switch-client -t "$session"
    else
      tmux attach -t "$session"
    fi
  fi
}

## kill session (inline or fzf select)
tk() {
  if [[ -n "$1" ]]; then
    tmux kill-session -t "$1"
  else
    local session
    session=$(tmux list-sessions -F '#{session_name}' 2>/dev/null \
      | fzf --prompt='kill session> ' --height=40% --reverse)
    [[ -z "$session" ]] && return 1
    tmux kill-session -t "$session"
  fi
}
